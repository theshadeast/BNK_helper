"""Knowledge base with ready-made responses for typical school IT issues."""

from __future__ import annotations

DEFAULT_ESCALATION = (
    "Если шаги не помогли, пожалуйста, оформите заявку: "
    "опишите, что не работает, в каком кабинете и на каком компьютере."
)

DEFAULT_DETAILS_PROMPT = (
    "Уточните, пожалуйста, что именно требуется, кабинет и номер компьютера — помогу оформить заявку."
)

KNOWLEDGE_BASE = {
    "printer_connection": {
        "title": "Подключение принтера",
        "steps": [
            "Проверьте, что принтер включен, индикаторы не сигнализируют об ошибке и есть бумага.",
            "Убедитесь, что кабель USB или сетевой провод подключен без перегибов, а для Wi‑Fi горит индикатор связи.",
            "Windows 10/11: откройте «Пуск» → «Настройки» → «Устройства» → «Принтеры и сканеры» и нажмите «Добавить принтер или сканер».",
            "Android: откройте нужный документ → «Поделиться» → «Печать» и выберите школьный принтер.",
            "iOS: откройте документ → значок «Поделиться» → «Печать», выберите AirPrint-принтер и проверьте состояние задания.",
        ],
        "commands": [
            "control printers",
        ],
        "escalate_text": DEFAULT_ESCALATION,
    },
    "network_drive": {
        "title": "Подключение сетевого диска",
        "steps": [
            "Проверьте, что компьютер подключён к школьной сети по кабелю или Wi‑Fi.",
            "Windows 10/11: откройте Проводник → «Этот компьютер» → «Подключить сетевой диск», укажите букву и путь вида \\server\\teachers.",
            "Android: в файловом менеджере выберите добавление сетевого ресурса (SMB), введите адрес сервера и школьные учётные данные.",
            "iOS: в приложении «Файлы» нажмите «…» → «Подключиться к серверу», укажите smb://server/teachers и авторизуйтесь.",
            "После подключения убедитесь, что папки открываются и файлы доступны только для чтения/записи по правилам школы.",
        ],
        "commands": [
            r"\\server\teachers",
        ],
        "escalate_text": DEFAULT_ESCALATION,
    },
    "wifi": {
        "title": "Подключение к Wi‑Fi",
        "steps": [
            "Убедитесь, что Wi‑Fi адаптер включён: на ноутбуке проверьте аппаратный переключатель или комбинацию клавиш (обычно Fn + F2/F3).",
            "Windows 10/11: откройте «Параметры» → «Сеть и Интернет» → «Wi‑Fi», выберите школьную сеть и введите актуальный пароль.",
            "Android: откройте «Настройки» → «Wi‑Fi», выберите сеть школы, нажмите «Забыть», затем подключитесь снова с правильным паролем.",
            "iOS: в «Настройки» → «Wi‑Fi» выберите сеть, нажмите «Забыть эту сеть», затем повторно подключитесь, введя пароль.",
            "Проверьте, работает ли интернет в браузере. При ошибке авторизации свяжитесь с администратором для проверки пароля.",
        ],
        "commands": [
            "netsh wlan show interfaces",
        ],
        "escalate_text": DEFAULT_ESCALATION,
    },
    "password_reset": {
        "title": "Восстановление пароля",
        "steps": [
            "Уточните, для какой системы нужен новый пароль: электронный журнал, почта или доменная учётная запись.",
            "Windows 10/11: нажмите Ctrl + Alt + Delete → «Изменить пароль» и следуйте подсказкам, если учётная запись доменная.",
            "Для электронного журнала откройте страницу входа и используйте ссылку «Забыли пароль?» с указанием школьной почты.",
            "Android/iOS: в приложении нужного сервиса найдите пункт «Забыли пароль?» или «Не получается войти» и следуйте инструкциям.",
            "Сообщите, если нет доступа к восстановлению — подготовлю заявку на сброс пароля через техотдел.",
        ],
        "escalate_text": DEFAULT_ESCALATION,
    },
    "interactive_board": {
        "title": "Использование интерактивной доски",
        "steps": [
            "Проверьте питание доски и кабели USB/HDMI от компьютера, убедитесь, что индикаторы горят зелёным.",
            "Windows 10/11: нажмите Win + P и выберите режим «Дублировать», затем откройте программное обеспечение доски (Smart/Promethean).",
            "Android: если подключаетесь через Miracast, включите «Беспроводной экран» и выберите доску из списка устройств.",
            "iOS: откройте «Пункт управления» → «Повтор экрана» и выберите приставку/приёмник, подключенный к доске.",
            "Калибруйте поверхность через меню доски и проверьте, что касания точно совпадают с курсором.",
        ],
        "escalate_text": DEFAULT_ESCALATION,
    },
    "projector": {
        "title": "Подключение проектора",
        "steps": [
            "Убедитесь, что проектор включён и выбран правильный источник сигнала (HDMI/VGA).",
            "Проверьте кабель между компьютером и проектором, при необходимости замените его или попробуйте другой вход.",
            "Windows 10/11: нажмите Win + P и выберите режим «Дублировать» или «Расширить» в зависимости от сценария.",
            "Android: используйте адаптер или беспроводной дисплей (Chromecast/Miracast), убедитесь, что устройства в одной сети.",
            "iOS: подключитесь через Apple TV или адаптер Lightning-HDMI, выберите режим повторения экрана.",
        ],
        "escalate_text": DEFAULT_ESCALATION,
    },
    "internet_diagnostics": {
        "title": "Диагностика интернета",
        "steps": [
            "Проверьте, горят ли индикаторы на сетевой розетке/роутере и подключён ли кабель к компьютеру.",
            "Windows 10/11: откройте «Центр управления сетями» → «Диагностика неполадок» и следуйте мастеру.",
            "Android: включите и выключите режим полёта, затем снова подключитесь к Wi‑Fi; проверьте, работает ли мобильный интернет.",
            "iOS: перезагрузите Wi‑Fi в настройках, затем проверьте подключение в браузере или приложении.",
            "Если интернет отсутствует во всём кабинете, сообщите об этом — возможно, нужна проверка сети техотделом.",
        ],
        "commands": [
            "ping 8.8.8.8",
        ],
        "escalate_text": DEFAULT_ESCALATION,
    },
    "sound_issue": {
        "title": "Проблемы со звуком",
        "steps": [
            "Проверьте, не отключён ли звук аппаратной кнопкой на ноутбуке или в колонках, и установлен ли регулятор громкости.",
            "Windows 10/11: щёлкните по значку динамика → выберите нужное устройство вывода → откройте «Параметры звука» для теста.",
            "Android: нажмите кнопки громкости и убедитесь, что режим «Без звука» не активирован; откройте настройки звука и выберите устройство.",
            "iOS: увеличьте громкость кнопками, проверьте, что переключатель «Без звука» на iPad/iPhone не включён, и выберите устройство вывода в «Пункте управления».",
            "Перезапустите приложение, где нет звука, и тестируйте системные звуки. Если результата нет, возможно, требуется проверка аудио-драйверов.",
        ],
        "commands": [
            "ms-settings:sound",
        ],
        "escalate_text": DEFAULT_ESCALATION,
    },
    "screen_issue": {
        "title": "Проблемы с изображением",
        "steps": [
            "Убедитесь, что кабель монитора плотно подключён и не повреждён, проверьте питание монитора.",
            "Windows 10/11: нажмите Win + Ctrl + Shift + B для сброса видеодрайвера и убедитесь в правильном разрешении в настройках экрана.",
            "Android: перезагрузите устройство и проверьте настройки яркости/цвета, отключите режим экономии энергии.",
            "iOS: перезагрузите устройство, проверьте True Tone/ночной режим, снимите все чехлы, которые могут закрывать датчики.",
            "Если артефакты остаются, зафиксируйте проблему на фото и отправьте техотделу вместе с описанием.",
        ],
        "escalate_text": DEFAULT_ESCALATION,
    },
    "tech_request": {
        "title": "Оформление заявки в техотдел",
        "needs_details": True,
        "details_prompt": (
            "Опишите, пожалуйста, что не работает, в каком кабинете и на каком компьютере — подготовлю заявку в техотдел."
        ),
        "steps": [
            "Соберите информацию: оборудование/программа, кабинет, номер рабочего места, когда обнаружили проблему.",
            "Сделайте фото экрана или оборудования, если есть ошибки.",
            "Передайте данные через сервис заявок или по почте it@school.local с темой «Заявка от {details}».",
            "Сообщите контакт для обратной связи и удобное время визита специалиста.",
        ],
        "escalate_text": DEFAULT_ESCALATION,
    },
}

__all__ = [
    "DEFAULT_DETAILS_PROMPT",
    "DEFAULT_ESCALATION",
    "KNOWLEDGE_BASE",
]
